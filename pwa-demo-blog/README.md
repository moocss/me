# Progressive Web App 下一代Web应用模型
Web技术的发展是日新月异的，当单页应用模型（Single-page App）和服务器端渲染，是当下前端构建 Web App 中比较流行的方案时，我们并不满足这些方案给我们用户体验上带来的改善。
Web App 与 原生应用相比，还是有很大的差距，我们开始慢慢习惯使用原生应用代替Web应用来消费大量的信息和知识。
由于 Web App 过度依赖于网络环境的好坏和浏览器本身的性能所带来的体验改善;
但是 Web 应用免于安装、随叫随到、无需更新等优点，瑕不掩瑜。

到底有没有一种方法能构建一个和原生应用一样级别体验的应用，这个时候 Progressive Web App, 简称 PWA，给我们带来了比较靠谱的解决方案， 它是提升 Web App 的体验的一种新方法，能给用户原生应用的体验， PWA 本质上就是 Web App，只不过借助一些新技术，也具备了 Native App 的一些特性，兼具 Web App 和 Native App 的优点，
PWA 并不是具体指某一种前沿的技术或者某一个单一的知识点，我们从英文缩写来看就能看出来，这是一个渐进式的 Web App。主要是增强 Web App 的体验，使站点具有类似原生应用的功能和体验，如：无版本问题、可索引、站点可添加至主屏幕、全屏方式运行、支持离线缓存、消息推送 等。

PWA 的主要特点包括下面三点：
可靠 - 即使在不稳定的网络环境下，也能瞬间加载并展现
体验 - 快速响应，并且有平滑的动画响应用户的操作
粘性 - 像设备上的原生应用，具有沉浸式的用户体验，用户可以添加到桌面

PWA 具有下面一些特性

渐进式 - 适用于所有浏览器，因为它是以渐进式增强作为宗旨开发的
连接无关性 - 能够借助 Service Worker 在离线或者网络较差的情况下正常访问
类似应用 - 由于是在 App Shell 模型基础上开发，因为应具有 Native App 的交互和导航，给用户 Native App 的体验
持续更新 - 始终是最新的，无版本和更新问题
安全 - 通过 HTTPS 协议提供服务，防止窥探和确保内容不被篡改
可索引 - 应用清单文件和 Service Worker 可以让搜索引擎索引到，从而将其识别为『应用』
粘性 - 通过推动离线通知等，可以让用户回流
可安装 - 用户可以添加常用的 webapp 到桌面，免去去应用商店下载的麻烦
可链接 - 通过链接即可分享内容，无需下载安装

要打造一个 PWA 站点，至少下面几个工作必不可少的：

- 为了让站点能像原生应用那样安装到主屏幕，我们需要准备一些静态资源（如屏幕图标）和一个清单文件 manifest.json 去告知浏览器使用哪些图标，显示哪些应用名称等等；
- 为了让站点具有更好的离线体验，PWA 提供了更好的缓存 API （详见 web 存储）和缓存管理方式 Service Worker。具体的缓存策略仍然需要开发者根据项目的实际需要进行开发；
- 同样是为了让站点具有更好的离线体验，除了要在缓存策略上下功夫，站点 UI 设计上也需要遵循一定的规范（如 App Shell 模型 和 离线 UX 注意事项 ），以至于站点在页面切换、内容加载、加载出错、弱网断网等等情况下不会给用户显示个大白屏。


3个主要的技术点

- 添加到桌面功能 ： 这是我们首先需要关注的一个内容，初始化项目模板中使用 static/manifest.json 的默认配置项，包括添加到桌面的图标、文案、打开方式、主题色等，开发者可以按需更换。
- Service Worker：这部分需要我们重点关注，主要涉及离线资源缓存的配置管理与更新，项目默认缓存所有静态资源，并提供了简单的缓存更新机制。如果您想缓存指定内容，或配置部分动态缓存的内容及其他相关问题，均可参考 维护 service-worker.js 文件 和 Service Worker 与页面通信 两部分内容来寻找解决方案。
- App Shell：在解决了上面两个必须的关键问题后，您可以对页面渲染中的白屏问题做进一步的优化，App Shell 就是其中之一。简单说，它就是第一次渲染个壳，等异步数据来了再填充，避免用户长时间看到白屏。这部分可以在 App Shell 调整及扩展 中查看相关介绍，Lavas 工具在 basic 外的模板中增加了 App Shell 的使用示例，供您参考。